[GENERAL]
description   = S. cerevisiae chromosome I
db_adaptor    = Bio::DB::GFF
db_args       = -adaptor memory
		-dir    '$HTDOCS/$GBROWSE_ROOT/databases/yeast_chr1'

aggregators = transcript alignment orf
plugins = BatchDumper FastaDumper RestrictionAnnotator FilterTest Submitter

# Web site configuration info
gbrowse root = $GBROWSE_ROOT
stylesheet   = gbrowse.css
buttons      = images/buttons
js           = js
tmpimages    = tmp

region segment = 20000

# advanced features
balloon tips    = 1
drag and drop = 1

# one hour
cache time    = 1

# popup balloon configuration
# 'balloon' is the default
custom balloons = [balloon] 
                  images    = /gbrowse/images/balloons

	          [balloon375]
		  images    = /gbrowse/images/balloons
	          maxWidth  = 375
		  delayTime = 500

# where to link to when user clicks in detailed view
link          = AUTO

# what image widths to offer
image widths  = 450 640 800 1024

# default width of detailed view (pixels)
default width = 800
default features = Genes
		   ORFs
		   tRNAs
		   Centro:overview

# The class of the feature that is used as the reference for all others
# "Sequence" is the default - change it if you use something else
reference class = Sequence

# max and default segment sizes for detailed view
max segment     = 500000
default segment = 50000

# zoom levels
zoom levels    = 50 100 200 1000 2000 5000 10000 20000 40000 100000 200000 500000 1000000

# whether to show the sources popup menu (0=false, 1=true; defaults to true)
show sources   = 1

# colors of the overview, detailed map and key
overview bgcolor = lightgrey
detailed bgcolor = lightgoldenrodyellow
key bgcolor      = beige

# examples to show in the introduction
examples = I
	   I:80,000..120,000
	   "membrane trafficking"
	   NUT21
	   ORF:YAL063C

# "automatic" classes to try when an unqualified identifier is given
automatic classes = Symbol Gene Clone

### HTML TO INSERT AT VARIOUS STRATEGIC LOCATIONS ###
# inside the <head></head> section
head = 

# at the top...
header =

# a footer
footer = <hr>
	<table width="100%">
	<TR>
	<TD align="LEFT" class="databody">
	For the source code for this browser, see the <a href="http://www.gmod.org">
	Generic Model Organism Database Project.</a>  For other questions, send
	mail to <a href="mailto:lstein@cshl.org">lstein@cshl.org</a>.
	</TD>
	</TR>
	</table>
	<hr>
	<pre>$Id: yeast_chr1.conf,v 1.9.4.3.2.3.2.29 2008-02-14 22:17:56 sheldon_mckay Exp $</pre>

# Various places where you can insert your own HTML -- see configuration docs
html1 = 
html2 = 
html3 = 
html4 = 
html5 = 
html6 = 


# Advanced feature: an example of callbacks to be run remotely
# by gbrowse_details for AJAX/iframe balloons
[TOOLTIPS]
intro = sub {
                my $args  = shift;
                my $feat  = $args->{feature};
                my $name  = $feat->display_name;
                my $type  = $feat->primary_tag;
                my $class = $feat->class;
                my $extra = join(' ',$feat->each_tag_value('Note')) if $feat->has_tag('Note');
                my $n     = $type =~ /^[AEIOU]/i ? 'n' : '';
                my $msg   = "Hello, I am $name, a$n $type of class $class";
                $msg     .= "<br>I am described as a <b>$extra</b><br>" if $extra;
                my $seq   = substr $feat->seq->seq, 0, 400;
                $seq =~ s/(\S{50})/$1\n/g;
                return "<table><tr><th bgcolor='lightsteelblue'>$name</th><tr>" .
                       "<tr><td>$msg</td></tr><tr><td bgcolor='lightyellow'>".
                       "First 400 bp (click on $type $name for the full sequence):".
		       "<br><pre>>$name\n$seq</pre></td></tr></table>";
           }
full_sequence = sub {
	          my $args = shift;
		  my $feat = $args->{feature};
		  my $name  = $feat->display_name;
		  my $seq = $feat->seq->seq;
		  $seq =~ s/(\S{75})/$1\n/g;
		  return "<pre>>$name\n$seq</pre>";
               }

# Advanced feature: an example of a customized popup mentu for rubber band selection
[OVERVIEW SELECT MENU]
width = 100
html  =  <table style="width:100%"> 
         <tr>
           <th style="background:lightgrey">
             Overview
             </span>
           </th>
         </tr>
         <tr>
           <td>
             <span style="color:blue;cursor:pointer" onclick="SelectArea.prototype.clearAndSubmit()">
              Zoom
             </span>
           </td>
         </tr>
         <tr>
           <td>
             <span style="color:blue;cursor:pointer" onclick="SelectArea.prototype.cancelRubber()">
               Cancel
             </span>
           </td>
         </tr>
        </table>


[DETAIL SELECT MENU]
width = 250
html  = <table style="width:100%">
         <tr>
           <th style="background:lightgrey;cell-padding:5">
	     SELECTION
             <span style="right:0px;position:absolute;color:blue;cursor:pointer" 
                   onclick="SelectArea.prototype.cancelRubber()">
               [X]
             </span> 
           </th>
         </tr>
         <tr>
           <td>
             <span style="color:blue;cursor:pointer" onclick="SelectArea.prototype.clearAndSubmit()">
              Zoom in
             </span>
           </td>
         </tr>
         <tr>
           <td>
             <span style="color:blue;cursor:pointer" onclick="SelectArea.prototype.clearAndRecenter()">
               Recenter on this region
             </span>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="?plugin=FastaDumper;plugin_action=Go;name=SELECTION" target="_BLANK">
	      Dump selection as FASTA
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="?name=SELECTION;plugin=Submitter;plugin_do=Go;Submitter.target=UCSC_BLAT" target="_BLANK">
               Submit selection to UCSC BLAT
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="?name=SELECTION;plugin=Submitter;plugin_do=Go;Submitter.target=NCBI_BLAST" target="_BLANK">
               Submit selection to NCBI BLAST
             </a>
           </td>
         </tr>
       </table>

# Configuration for submitter plugin (used in above menu)
[Submitter:plugin]
submitter = [UCSC_BLAT]
            url        = http://genome.ucsc.edu/cgi-bin/hgBlat
            seq_label  = userSeq
            output     = hyperlink
            type       = DNA
            extra_html = Genome:
                         <SELECT name=org>
                         <OPTION VALUE="Human">Human</OPTION>
                         <OPTION VALUE="Chimp">Chimp</OPTION>
                         <OPTION VALUE="Rhesus">Rhesus</OPTION>
                         <OPTION VALUE="Mouse">Mouse</OPTION>
                         <OPTION VALUE="Stickleback">Stickleback</OPTION>
                         <OPTION VALUE="Medaka">Medaka</OPTION>
                         <OPTION VALUE="C. intestinalis">C. intestinalis</OPTION>
                         <OPTION VALUE="S. purpuratus">S. purpuratus</OPTION>
                         <OPTION VALUE="D. persimilis">D. persimilis</OPTION>
                         <OPTION VALUE="D. virilis">D. virilis</OPTION>
                         <OPTION VALUE="D. mojavensis">D. mojavensis</OPTION>
                         <OPTION VALUE="D. grimshawi">D. grimshawi</OPTION>
                         <OPTION VALUE="A. gambiae">A. gambiae</OPTION>
                         <OPTION VALUE="A. mellifera">A. mellifera</OPTION>
                         <OPTION SELECTED VALUE="S. cerevisiae">S. cerevisiae</OPTION>
                         <OPTION VALUE="SARS">SARS</OPTION>
                         </SELECT>

            [NCBI_BLAST]
            confirm   = 1
            url       = http://www.ncbi.nlm.nih.gov/blast/Blast.cgi
            seq_label = QUERY
            PAGE      = Nucleotides
            PROGRAM   = blastn
            DATABASE  = nr
            CLIENT    = web
            CMD       = put



# Default glyph settings
[TRACK DEFAULTS]
glyph       = generic
height      = 8
bgcolor     = cyan
fgcolor     = cyan
label density = 25
bump density  = 100
balloon hover = <b>$name</b> is a $type spanning chr$ref from $start to $end

### TRACK CONFIGURATION ####
# the remainder of the sections configure individual tracks

[Centro:overview]
feature       = CEN:sgd
bgcolor       = blue
glyph         = dot
fgcolor       = black
height        = 8
point         = 1
key           = Centromeres

[tRNA:overview]
feature       = tRNA:sgd
glyph         = generic
bgcolor       = lightgray
fgcolor       = black
height        = 4
stranded      = 1
description   = 1
key           = tRNAs

[Landmarks:region]
feature      = ORF:sgd
bgcolor      = blue
key          = Random landmarks

[Genes]
feature      = gene:sgd
glyph        = generic
bgcolor      = yellow
forwardcolor = yellow
reversecolor = turquoise
strand_arrow = 1
height       = 6
description  = 1
balloon width = 275
balloon click =
      <table>
      <tr><td rowspan="4"><img src='http://genetics.mgh.harvard.edu/hartweb/elwormo.jpeg'/></td></tr>
      <tr><th bgcolor="cyan">Gene $name</th><th width=5%></th></tr>
      <tr align='left'><th colspan=2><a href="http://en.wikipedia.org/wiki/Special:Search?search=$name">Ask Wikipedia about $name</a></th></tr>
      <tr align='left'><th colspan=2><a href="http://www.google.com/search?q=$name">Ask Google about $name</a></th></tr>
      </table>
key          = Named gene

[ORFs]
feature       = ORF:sgd
glyph         = arrow
#fgcolor       = blue
fgcolor       = sub {
	my $feature = shift;
	return $feature->strand > 0 ? 'red' : 'orange';
	}
linewidth = 2
description   = 1
citation      = This is an open reading frame.
key           = ORF
# pop-up balloons
# Note1: the 'url:' prefix is for AJAX
# Note2: a bare URL will be wrapped in an iframe (non-AJAX).  Use for larger or cross-domain content
# Note3: it may be necessary to edit the URLs if you have installed gbrowse in a non-standard location
balloon hover  = [balloon375] url:/cgi-bin/gbrowse_details/yeast_chr1?name=$name;class=$class;remote=intro
balloon click  = /cgi-bin/gbrowse_details/yeast_chr1?name=$name;class=$class;remote=full_sequence
# balloon height option only applies to iframes
balloon height = 275

[CDS]
feature      = ORF:sgd
glyph        = cds
description  = 0
height       = 26
# we need this because the yeast GFF file does not define the phase
allow_empty_phase = 1
sixframe     = 1
label        = CDS frame
key          = CDS
balloon sticky = 1
balloon hover  =  sub {
	           my $feature = shift;
	           my $name = $feature->name;
                   return "http://www.google.com/search?q=$name"
	}
citation     = This track shows CDS reading frames.

[tRNAs]
feature       = tRNA:sgd
glyph         = generic
bgcolor       = lightgray
fgcolor       = black
height        = 4
stranded      = 1
description   = 1
key           = tRNAs

[Transp]
feature       = Transposon:sgd
glyph         = segments
bgcolor       = yellow
fgcolor       = black
height        = 5
stranded      = 1
key           = Transposons

[LTRs]
feature       = LTR:sgd
fgcolor       = black
glyph         = anchored_arrow
height        = 6
key           = Long Terminal Repeats

[Translation]
glyph        = translation
global feature = 1
height       = 40
fgcolor      = purple
strand       = +1
translation  = 6frame
key          = 6-frame translation

[TranslationF]
glyph        = translation
global feature = 1
height       = 20
fgcolor      = purple
strand       = +1
translation  = 3frame
key          = 3-frame translation (forward)

[DNA/GC Content]
glyph        = dna
global feature = 1
height       = 40
do_gc        = 1
strand       = both
fgcolor      = red
axis_color   = blue

[TranslationR]
glyph        = translation
global feature = 1
height       = 20
fgcolor      = blue
strand       = -1
translation  = 3frame
key          = 3-frame translation (reverse)

[ncRNA]
feature       = RNA:sgd rRNA:sgd snRNA:sgd snoRNA:sgd
fgcolor       = orange
glyph         = generic
description   = 1
key           = Noncoding RNAs
