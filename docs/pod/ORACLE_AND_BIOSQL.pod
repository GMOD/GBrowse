=head1 Oracle, PostgreSQL, and BioSQL

Support for various databases and database schemas are coming.  Right
now, there is full support for the Bio::DB::GFF schema running on
MySQL, preliminary support for the Bio::DB::GFF schema running on top
of Oracle,  preliminary support for the Bio::DB::GFF schema running
on top of PostgreSQL, and preliminary support for the BioSQL schema running
on top of MySQL.  There is also support for the GadFly schema running on
top of MySQL and PostgreSQL, but this uses an earlier (forked) version
of GBrowse.  See README-berkeley-gadfly for more details.

=head2 Bio::DB::GFF on Oracle

To run GBrowse on top of Oracle, you will need a recent version of
BioPerl that contains Shuly Avraham's
Bio::DB::GFF::Adaptor::dbi::oracleopt adaptor.  Create the database,
name it, and set access permissions.  Then run the load_gff.pl script
to initialize and load it with the GFF data:

 load_gff.pl -c -adaptor dbi::oracleopt -user <user> -pass <pass> \
             -dsn 'dbi:oracle:sid=<service>;host=<host>' yeast_data.gff

Replace <service> with the service definition for your database, as
well as the username, password and host fields.

If you haven't already, you must configure Apache so that various
Oracle environment variables are available to CGI scripts.  My
httpd.conf file contains these declarations:

 <Directory "/var/www/cgi-bin">
    AllowOverride None
    Options ExecCGI
    Order allow,deny
    Allow from all
    SetEnv ORACLE_BASE /home/oracle
    SetEnv ORACLE_HOME /home/oracle/Home
    SetEnv ORACLE_SID  gbrowse
    SetEnv NLS_LANG    AMERICAN_AMERICA.US7ASCII
 </Directory>

You will need to adjust these values to suit your particular Oracle
installation.

The final step is to tell GBrowse to use the Oracle database.  In the
[GENERAL] section, enter the following values for db_adaptor and
db_args:

    db_adaptor = Bio::DB::GFF
    db_args = -dsn     dbi:Oracle:sid=<service>;host=<host>
              -adaptor dbi::oracleopt
              -user    <username>
              -pass    <password>

Replace <service>, <host>, <username> and <password> with the values
appropriate for your system.

=head2 PostgreSQL

In order to use Bio::DB::GFF with PostgreSQL (Pg), the Pg adaptor is
required.  Pg version 7.3 or greater is required to use with this
adaptor.  The adaptor is part of BioPerl but is not released yet;
it will be part of the 1.3 release.  Until it is released, you can
obtain a tarball of bioperl-live using this link: 

   http://cvs.bioperl.org/cgi-bin/viewcvs/viewcvs.cgi/bioperl-live/bioperl-live.tar.gz?tarball=1&cvsroot=bioperl 

It is suggested that during the make process for BioPerl that you 
run `make test` for the Pg adaptor.

After successful installation of BioPerl, there are a few configuration
items in Pg.  Before loading the data, the database must be created.
The database can either be created from within psql or from the command 
line:

   % createdb --owner <username> <dbname>

To load the data, two options are available:

=over

=item bp_load_gff.pl

=item bp_pg_bulk_load_gff.pl

=back

=head2 BioSQL on MySQL

To run GBrowse on top of BioSQL, you will need a recent version of
BioPerl that has the DAS (distributed annotation system) interface
files.  Initialize and load your BioSQL database according to the
directions in the biosql-schema and bioperl-db distributions.  Since
the API is still changing, I highly recommend that you check out the
bioperl-release-1-1-0 branches of both modules (use 'cvs' for the
anonymous checkout):

   cvs -d :pserver:cvs@cvs.open-bio.org:/home/repository/bioperl login
   cvs -d :pserver:cvs@cvs.open-bio.org:/home/repository/bioperl \
	  co -r bioperl-release-1-1-0 bioperl-db

   cvs -d :pserver:cvs@cvs.open-bio.org:/home/repository/biosql login
   cvs -d :pserver:cvs@cvs.open-bio.org:/home/repository/biosql \
	  co -r bioperl-release-1-1-0 biosql-schema

Use the following db_adaptor and db_args options as templates for your
GBrowse configuration file:

  db_adaptor  = Bio::DB::Das::BioSQL
  db_args     = driver    mysql
	      dbname    <dbname>
	      biodbname <biodbname>
	      host      <hostname>
	      user      <username>
              pass      <password>

Replace the values in angle brackets with the appropriate values.  A
sample configuration file can be found in conf/06.biosql.conf

Lincoln Stein
<lstein@cshl.org>
